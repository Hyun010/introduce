{% extends "layout.html" %}
{% block title %}Index{% endblock %}
{% block head %}
<style>
    .namezone {
        justify-content: space-between;
        display: flex;
        align-items: start;
        color: white;
        font-size: 70px;
    }

    .namezone>img {
        position: relative;
        bottom: 30px;
    }

    .piczone {
        text-align: center;
    }

    .stupic {
        width: 70%;
        border-radius: 100%;
    }

    .info_header {
        font-size: 36px;
        color: #ffffff;
        /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
        text-shadow: 0 0 10px #ffff00;
        /* í˜•ê´‘íœ ìƒ‰ìƒê³¼ ë¸”ëŸ¬ íš¨ê³¼ */
    }

    .info_box {
        display: block;
        width: 100%;
        padding: .375rem .75rem;
        font-weight: 400;
        line-height: 1.5;
        color: var(--bs-body-color);
        -moz-appearance: none;
        appearance: none;
        background-clip: padding-box;
        border-radius: var(--bs-border-radius);
        transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        font-size: 20px;
        overflow-y: auto;
        height: 110px;
        white-space: pre-line;
        resize: none;
        font-family: 'ê¶ì„œì²´';
    }

    .info_box:disabled {
        background-color: #edff4a86;
    }

    textarea[overflow-y='hidden'] {
        overflow-y: hidden;
        /* ë‚´ìš©ì´ í…ìŠ¤íŠ¸ ì˜ì—­ì˜ ë†’ì´ë³´ë‹¤ í´ ê²½ìš° ìŠ¤í¬ë¡¤ì„ ìˆ¨ê¹€ */
        height: 150px;
        /* í…ìŠ¤íŠ¸ ì˜ì—­ì˜ ë†’ì´ë¥¼ ê³ ì •ê°’ìœ¼ë¡œ ì„¤ì • */
    }

    .fm {
        position: relative;
        bottom: 30px;
    }

    .nametag {
        position: relative;
        left: 47%;
    }

    .weather {
        color: white;
        font-size: 40px;
    }

    .bt {
        background-color: transparent;
        color: white;
        font-size: 40px;
        border: none;
    }
    .probtn{
        width: 200px;
    }
</style>
{% endblock %}
{% block content %}

<div class="container mt-5">
    <div class="namezone">
        <div class="nametag">
            <span>{{ data.stu.name }}</span>
            {% if data.stu.sex == 'ë‚¨' %}
            <img class="fm" width="50px" height="50px" src="{{ url_for('static', filename='boy.png')}}">
            {% else %}
            <img class="fm" width="50px" height="50px" src="{{ url_for('static', filename='girl.png')}}">
            {% endif %}
        </div>
    </div>

    <div class="weather text-end">
        <span id="wea">
            ë‚ ì”¨ ë¡œë“œì¤‘! <input type="hidden" id="loca" value="{{data.stu.loca}}">
        </span>
    </div>

    <div class="row infozone">
        <div class="col-lg-4 piczone" style="margin: auto">
            <img class="stupic" src="{{ url_for('static', filename=data.stu.image)}}">
        </div>
        <div class="col-lg-8">
            <div class="row">
                <div class="col-lg-6">
                    <div class="info_header">
                        <span>ìê¸°ì†Œê°œ</span>
                    </div>
                    <textarea class="info_box" disabled>
                                {{ data.stu.intro }}
                            </textarea>
                </div>
                <div class="col-lg-6">
                    <div class="info_header">
                        <span>í˜‘ì—… ìŠ¤íƒ€ì¼</span>
                    </div>
                    <textarea class="info_box" disabled>
                                {{ data.stu.style }}
                            </textarea>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-lg-6">
                    <div class="info_header">
                        <span>ì¢Œìš°ëª…</span>
                    </div>
                    <textarea class="info_box" disabled>
                                {{ data.stu.life }}
                            </textarea>
                </div>
                <div class="col-lg-6">
                    <div class="info_header">
                        <span>ê°œë°œì í¬ë¶€</span>
                    </div>
                    <textarea class="info_box" disabled>
                                {{ data.stu.prom }}
                            </textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="mt-4 text-end mb-4">
        <a type="button" class="btn btn-success probtn" href="{{data.stu.blog}}">ë¸”ë¡œê·¸</a>
        <a class="btn btn-secondary probtn" href="{{url_for('home')}}">í™ˆìœ¼ë¡œ</a>
    </div>
</div>
<script>
    //01,02 ì›” ë“± ìˆ«ì ë§ì¶”ê¸°
    function addZero(date) {
        if (date < 10) {
            const zeroDate = ('00' + date).slice(-2);
            return zeroDate;
        }
        return date;
    }

    $(document).ready(function() {        
        const date = new Date();
        year = date.getFullYear();
        month = addZero(date.getMonth() + 1);

        day = addZero(date.getDate())
        hours = addZero(date.getHours())
        min = addZero(date.getMinutes()) - 30
        loca = $('#loca').val()
        switch (loca) {
            case "ëŒ€êµ¬": x = 89, y = 90
                break;
            case "ì„œìš¸": x = 60, y = 127
                break;
            case "ë¶€ì‚°": x = 98, y = 76
                break;
            case "ì¸ì²œ": x = 55, y = 124
                break;
            case "ê´‘ì£¼": x = 58, y = 74
                break;
            case "ëŒ€ì „": x = 67, y = 100
                break;
            case "ìš¸ì‚°": x = 102, y = 84
                break;
            case "ì„¸ì¢…": x = 66, y = 103
                break;
            case "ê²½ê¸°": x = 60, y = 120
                break;
            case "ê°•ì›": x = 173, y = 134
                break;
            case "ì¶©ë¶": x = 69, y = 107
                break;
            case "ì¶©ë‚¨": x = 68, y = 100
                break;
            case "ì „ë¶": x = 63, y = 89
                break;
            case "ì „ë‚¨": x = 51, y = 67
                break;
            case "ê²½ë¶": x = 89, y = 91
                break;
            case "ê²½ë¶": x = 89, y = 91
                break;
            case "ê²½ë‚¨": x = 91, y = 77
                break;
            case "ì œì£¼": x = 52, y = 38
                break;
        }
        //ì˜¤í”ˆAI
        url = `http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtNcst?serviceKey=%2FLicGwq516VzXp1SmygKDENxiQOj%2FBOzF9XaR1qTv%2B6G6qIWvzmHhh9FOS0oHBSnOgd5KMb30G52RLPgKq7XXA%3D%3D&numOfRows=8&pageNo=1&dataType=JSON&base_date=${year}${month}${day}&base_time=${hours}${min}&nx=${x}&ny=${y}`
        fetch(url)
            .then(res => res.json())
            .then(data => {
                $('#wea').empty()
                let pty = data["response"]["body"]["items"]["item"][0]["obsrValue"] //ê°•ìˆ˜í˜•íƒœ 0ë§‘ìŒ 1ë¹„ 2ë¹„/ëˆˆ 3ëˆˆ 5ë¹—ë°©ìš¸ 6ë¹—ë°©ìš¸ëˆˆë‚ ë¦½ 7ëˆˆë‚ ë¦¼
                let t1h = data["response"]["body"]["items"]["item"][3]["obsrValue"] //ì˜¨ë„

                switch (pty) {
                    case 1: pty_r = "ğŸŒ§"
                        break;
                    case 2: pty_r = "ğŸŒ§ğŸŒ¨"
                        break;
                    case 3: pty_r = "ğŸŒ¨"
                        break;
                    case 5: pty_r = "â˜”"
                        break;
                    case 6: pty_r = "â˜”â„"
                        break;
                    case 7: pty_r = "â„"
                        break;
                    default: pty_r = "ğŸŒ"
                        break;
                }
                let temp_html = `<p>${loca} ${pty_r} ${t1h}Â°C`
                $('#wea').append(temp_html)
            })
    })

</script>

{% endblock %}